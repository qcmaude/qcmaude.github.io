{"ast":null,"code":"/** @packageDocumentation @internalapi @module vanilla */\nimport { isDefined, isUndefined } from '../common/predicates';\n/** A `LocationConfig` that delegates to the browser's `location` object */\n\nvar BrowserLocationConfig =\n/** @class */\nfunction () {\n  function BrowserLocationConfig(router, _isHtml5) {\n    if (_isHtml5 === void 0) {\n      _isHtml5 = false;\n    }\n\n    this._isHtml5 = _isHtml5;\n    this._baseHref = undefined;\n    this._hashPrefix = '';\n  }\n\n  BrowserLocationConfig.prototype.port = function () {\n    if (location.port) {\n      return Number(location.port);\n    }\n\n    return this.protocol() === 'https' ? 443 : 80;\n  };\n\n  BrowserLocationConfig.prototype.protocol = function () {\n    return location.protocol.replace(/:/g, '');\n  };\n\n  BrowserLocationConfig.prototype.host = function () {\n    return location.hostname;\n  };\n\n  BrowserLocationConfig.prototype.html5Mode = function () {\n    return this._isHtml5;\n  };\n\n  BrowserLocationConfig.prototype.hashPrefix = function (newprefix) {\n    return isDefined(newprefix) ? this._hashPrefix = newprefix : this._hashPrefix;\n  };\n\n  BrowserLocationConfig.prototype.baseHref = function (href) {\n    if (isDefined(href)) this._baseHref = href;\n    if (isUndefined(this._baseHref)) this._baseHref = this.getBaseHref();\n    return this._baseHref;\n  };\n\n  BrowserLocationConfig.prototype.getBaseHref = function () {\n    var baseTag = document.getElementsByTagName('base')[0];\n\n    if (baseTag && baseTag.href) {\n      return baseTag.href.replace(/^([^/:]*:)?\\/\\/[^/]*/, '');\n    }\n\n    return this._isHtml5 ? '/' : location.pathname || '/';\n  };\n\n  BrowserLocationConfig.prototype.dispose = function () {};\n\n  return BrowserLocationConfig;\n}();\n\nexport { BrowserLocationConfig };","map":{"version":3,"sources":["@uirouter/core/vanilla/browserLocationConfig.ts"],"names":[],"mappings":"AAAA;AACA,SAAS,SAAT,EAAoB,WAApB,QAAuC,sBAAvC;AAGA;;AACA,IAAA,qBAAA;AAAA;AAAA,YAAA;AAIE,WAAA,qBAAA,CAAY,MAAZ,EAA6B,QAA7B,EAA6C;AAAhB,QAAA,QAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,QAAA,GAAA,KAAA;AAAgB;;AAAhB,SAAA,QAAA,GAAA,QAAA;AAHrB,SAAA,SAAA,GAAY,SAAZ;AACA,SAAA,WAAA,GAAc,EAAd;AAEyC;;AAEjD,EAAA,qBAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AACE,QAAI,QAAQ,CAAC,IAAb,EAAmB;AACjB,aAAO,MAAM,CAAC,QAAQ,CAAC,IAAV,CAAb;AACD;;AAED,WAAO,KAAK,QAAL,OAAoB,OAApB,GAA8B,GAA9B,GAAoC,EAA3C;AACD,GAND;;AAQA,EAAA,qBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,YAAA;AACE,WAAO,QAAQ,CAAC,QAAT,CAAkB,OAAlB,CAA0B,IAA1B,EAAgC,EAAhC,CAAP;AACD,GAFD;;AAIA,EAAA,qBAAA,CAAA,SAAA,CAAA,IAAA,GAAA,YAAA;AACE,WAAO,QAAQ,CAAC,QAAhB;AACD,GAFD;;AAIA,EAAA,qBAAA,CAAA,SAAA,CAAA,SAAA,GAAA,YAAA;AACE,WAAO,KAAK,QAAZ;AACD,GAFD;;AAKA,EAAA,qBAAA,CAAA,SAAA,CAAA,UAAA,GAAA,UAAW,SAAX,EAA6B;AAC3B,WAAO,SAAS,CAAC,SAAD,CAAT,GAAwB,KAAK,WAAL,GAAmB,SAA3C,GAAwD,KAAK,WAApE;AACD,GAFD;;AAIA,EAAA,qBAAA,CAAA,SAAA,CAAA,QAAA,GAAA,UAAS,IAAT,EAAsB;AACpB,QAAI,SAAS,CAAC,IAAD,CAAb,EAAqB,KAAK,SAAL,GAAiB,IAAjB;AACrB,QAAI,WAAW,CAAC,KAAK,SAAN,CAAf,EAAiC,KAAK,SAAL,GAAiB,KAAK,WAAL,EAAjB;AACjC,WAAO,KAAK,SAAZ;AACD,GAJD;;AAMQ,EAAA,qBAAA,CAAA,SAAA,CAAA,WAAA,GAAR,YAAA;AACE,QAAM,OAAO,GAAoB,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAjC;;AACA,QAAI,OAAO,IAAI,OAAO,CAAC,IAAvB,EAA6B;AAC3B,aAAO,OAAO,CAAC,IAAR,CAAa,OAAb,CAAqB,sBAArB,EAA6C,EAA7C,CAAP;AACD;;AAED,WAAO,KAAK,QAAL,GAAgB,GAAhB,GAAsB,QAAQ,CAAC,QAAT,IAAqB,GAAlD;AACD,GAPO;;AASR,EAAA,qBAAA,CAAA,SAAA,CAAA,OAAA,GAAA,YAAA,CAAY,CAAZ;;AACF,SAAA,qBAAA;AAAC,CA/CD,EAAA","sourcesContent":["/** @packageDocumentation @internalapi @module vanilla */\nimport { isDefined, isUndefined } from '../common/predicates';\nimport { LocationConfig } from '../common/coreservices';\n\n/** A `LocationConfig` that delegates to the browser's `location` object */\nexport class BrowserLocationConfig implements LocationConfig {\n  private _baseHref = undefined;\n  private _hashPrefix = '';\n\n  constructor(router?, private _isHtml5 = false) {}\n\n  port(): number {\n    if (location.port) {\n      return Number(location.port);\n    }\n\n    return this.protocol() === 'https' ? 443 : 80;\n  }\n\n  protocol(): string {\n    return location.protocol.replace(/:/g, '');\n  }\n\n  host(): string {\n    return location.hostname;\n  }\n\n  html5Mode(): boolean {\n    return this._isHtml5;\n  }\n\n  hashPrefix(): string;\n  hashPrefix(newprefix?: string): string {\n    return isDefined(newprefix) ? (this._hashPrefix = newprefix) : this._hashPrefix;\n  }\n\n  baseHref(href?: string): string {\n    if (isDefined(href)) this._baseHref = href;\n    if (isUndefined(this._baseHref)) this._baseHref = this.getBaseHref();\n    return this._baseHref;\n  }\n\n  private getBaseHref() {\n    const baseTag: HTMLBaseElement = document.getElementsByTagName('base')[0];\n    if (baseTag && baseTag.href) {\n      return baseTag.href.replace(/^([^/:]*:)?\\/\\/[^/]*/, '');\n    }\n\n    return this._isHtml5 ? '/' : location.pathname || '/';\n  }\n\n  dispose() {}\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}