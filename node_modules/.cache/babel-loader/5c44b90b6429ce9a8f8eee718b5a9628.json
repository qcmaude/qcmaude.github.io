{"ast":null,"code":"/** @packageDocumentation @reactapi @module react_hooks */\nimport { useEffect } from 'react';\nimport { useDeepObjectDiff } from './useDeepObjectDiff';\nimport { useRouter } from './useRouter';\nimport { useStableCallback } from './useStableCallback';\nexport function useTransitionHook(hookRegistrationFnName, criteria, callback, options) {\n  var transitionService = useRouter().transitionService;\n  var stableCallback = useStableCallback(callback);\n  useEffect(function () {\n    if (!!criteria) {\n      var deregister_1 = transitionService[hookRegistrationFnName](criteria, stableCallback, options);\n      return function () {\n        return deregister_1();\n      };\n    } else {\n      return function () {};\n    }\n  }, [transitionService, hookRegistrationFnName, useDeepObjectDiff(criteria), useDeepObjectDiff(options)]);\n}","map":{"version":3,"sources":["@uirouter/react/hooks/useTransitionHook.ts"],"names":[],"mappings":"AAAA;AAEA,SAAS,SAAT,QAA0B,OAA1B;AAEA,SAAS,iBAAT,QAAkC,qBAAlC;AACA,SAAS,SAAT,QAA0B,aAA1B;AACA,SAAS,iBAAT,QAAkC,qBAAlC;AAkDA,OAAM,SAAU,iBAAV,CACJ,sBADI,EAEJ,QAFI,EAGJ,QAHI,EAIJ,OAJI,EAIoB;AAEhB,MAAA,iBAAA,GAAA,SAAA,GAAA,iBAAA;AACR,MAAM,cAAc,GAAG,iBAAiB,CAAC,QAAD,CAAxC;AACA,EAAA,SAAS,CAAC,YAAA;AACR,QAAI,CAAC,CAAC,QAAN,EAAgB;AACd,UAAM,YAAU,GAAG,iBAAiB,CAAC,sBAAD,CAAjB,CAA0C,QAA1C,EAAoD,cAApD,EAA2E,OAA3E,CAAnB;AACA,aAAO,YAAA;AAAM,eAAA,YAAA,EAAA;AAAY,OAAzB;AACD,KAHD,MAGO;AACL,aAAO,YAAA,CAAQ,CAAf;AACD;AACF,GAPQ,EAON,CAAC,iBAAD,EAAoB,sBAApB,EAA4C,iBAAiB,CAAC,QAAD,CAA7D,EAAyE,iBAAiB,CAAC,OAAD,CAA1F,CAPM,CAAT;AAQD","sourcesContent":["/** @packageDocumentation @reactapi @module react_hooks */\n\nimport { useEffect } from 'react';\nimport { TransitionStateHookFn, HookMatchCriteria, HookRegOptions, TransitionHookFn } from '@uirouter/core';\nimport { useDeepObjectDiff } from './useDeepObjectDiff';\nimport { useRouter } from './useRouter';\nimport { useStableCallback } from './useStableCallback';\n\ntype HookName = 'onBefore' | 'onStart' | 'onSuccess' | 'onError' | 'onSuccess' | 'onFinish';\ntype StateHookName = 'onEnter' | 'onRetain' | 'onExit';\n\n/**\n * A React hook that registers a UI-Router Transition Hook and manages its lifecycle.\n *\n * This hook can be used to register a Transition Hook with UI-Router from a component.\n * The Transition Hook will be automatically de-registered when the component unmounts.\n * The Transition Hook will receive the current [[Transition]] object (like all Transition Hooks).\n *\n *\n * Example:\n * ```jsx\n * function DisallowExitUntilVerified() {\n *   const [allowExit, setAllowExit] = useState(false);\n *   useTransitionHook('onBefore', {}, transition => {\n *     return allowExit;\n *   });\n *\n *   if (canExit) {\n *     return <span>OK, the current state can be exited!</span>\n *   }\n *   return (\n *     <div>\n *       The current state can't be exited until you click this button:\n *       <button onClick={() => setAllowExit(true)}>Allow Exit</button>\n *      </div>\n *   )\n * }\n * ```\n *\n * @param hookName the name of the lifecycle event\n * @param criteria the transition criteria object\n * @param callback the callback to invoke\n * @param options transition hook options\n */\nexport function useTransitionHook(\n  hookName: HookName,\n  criteria: HookMatchCriteria,\n  callback: TransitionHookFn,\n  options?: HookRegOptions\n);\nexport function useTransitionHook(\n  hookName: StateHookName,\n  criteria: HookMatchCriteria,\n  callback: TransitionStateHookFn,\n  options?: HookRegOptions\n);\nexport function useTransitionHook(\n  hookRegistrationFnName: HookName | StateHookName,\n  criteria: HookMatchCriteria,\n  callback: TransitionHookFn | TransitionStateHookFn,\n  options?: HookRegOptions\n) {\n  const { transitionService } = useRouter();\n  const stableCallback = useStableCallback(callback);\n  useEffect(() => {\n    if (!!criteria) {\n      const deregister = transitionService[hookRegistrationFnName](criteria, stableCallback as any, options);\n      return () => deregister();\n    } else {\n      return () => {};\n    }\n  }, [transitionService, hookRegistrationFnName, useDeepObjectDiff(criteria), useDeepObjectDiff(options)]);\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}