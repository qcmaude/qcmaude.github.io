{"ast":null,"code":"/** @packageDocumentation @publicapi @module state */\nimport { isObject, isString } from '../common/predicates';\nimport { stringify } from '../common/strings';\nimport { extend } from '../common';\n/**\n * Encapsulate the target (destination) state/params/options of a [[Transition]].\n *\n * This class is frequently used to redirect a transition to a new destination.\n *\n * See:\n *\n * - [[HookResult]]\n * - [[TransitionHookFn]]\n * - [[TransitionService.onStart]]\n *\n * To create a `TargetState`, use [[StateService.target]].\n *\n * ---\n *\n * This class wraps:\n *\n * 1) an identifier for a state\n * 2) a set of parameters\n * 3) and transition options\n * 4) the registered state object (the [[StateDeclaration]])\n *\n * Many UI-Router APIs such as [[StateService.go]] take a [[StateOrName]] argument which can\n * either be a *state object* (a [[StateDeclaration]] or [[StateObject]]) or a *state name* (a string).\n * The `TargetState` class normalizes those options.\n *\n * A `TargetState` may be valid (the state being targeted exists in the registry)\n * or invalid (the state being targeted is not registered).\n */\n\nvar TargetState =\n/** @class */\nfunction () {\n  /**\n   * The TargetState constructor\n   *\n   * Note: Do not construct a `TargetState` manually.\n   * To create a `TargetState`, use the [[StateService.target]] factory method.\n   *\n   * @param _stateRegistry The StateRegistry to use to look up the _definition\n   * @param _identifier An identifier for a state.\n   *    Either a fully-qualified state name, or the object used to define the state.\n   * @param _params Parameters for the target state\n   * @param _options Transition options.\n   *\n   * @internalapi\n   */\n  function TargetState(_stateRegistry, _identifier, _params, _options) {\n    this._stateRegistry = _stateRegistry;\n    this._identifier = _identifier;\n    this._identifier = _identifier;\n    this._params = extend({}, _params || {});\n    this._options = extend({}, _options || {});\n    this._definition = _stateRegistry.matcher.find(_identifier, this._options.relative);\n  }\n  /** The name of the state this object targets */\n\n\n  TargetState.prototype.name = function () {\n    return this._definition && this._definition.name || this._identifier;\n  };\n  /** The identifier used when creating this TargetState */\n\n\n  TargetState.prototype.identifier = function () {\n    return this._identifier;\n  };\n  /** The target parameter values */\n\n\n  TargetState.prototype.params = function () {\n    return this._params;\n  };\n  /** The internal state object (if it was found) */\n\n\n  TargetState.prototype.$state = function () {\n    return this._definition;\n  };\n  /** The internal state declaration (if it was found) */\n\n\n  TargetState.prototype.state = function () {\n    return this._definition && this._definition.self;\n  };\n  /** The target options */\n\n\n  TargetState.prototype.options = function () {\n    return this._options;\n  };\n  /** True if the target state was found */\n\n\n  TargetState.prototype.exists = function () {\n    return !!(this._definition && this._definition.self);\n  };\n  /** True if the object is valid */\n\n\n  TargetState.prototype.valid = function () {\n    return !this.error();\n  };\n  /** If the object is invalid, returns the reason why */\n\n\n  TargetState.prototype.error = function () {\n    var base = this.options().relative;\n\n    if (!this._definition && !!base) {\n      var stateName = base.name ? base.name : base;\n      return \"Could not resolve '\" + this.name() + \"' from state '\" + stateName + \"'\";\n    }\n\n    if (!this._definition) return \"No such state '\" + this.name() + \"'\";\n    if (!this._definition.self) return \"State '\" + this.name() + \"' has an invalid definition\";\n  };\n\n  TargetState.prototype.toString = function () {\n    return \"'\" + this.name() + \"'\" + stringify(this.params());\n  };\n  /**\n   * Returns a copy of this TargetState which targets a different state.\n   * The new TargetState has the same parameter values and transition options.\n   *\n   * @param state The new state that should be targeted\n   */\n\n\n  TargetState.prototype.withState = function (state) {\n    return new TargetState(this._stateRegistry, state, this._params, this._options);\n  };\n  /**\n   * Returns a copy of this TargetState, using the specified parameter values.\n   *\n   * @param params the new parameter values to use\n   * @param replace When false (default) the new parameter values will be merged with the current values.\n   *                When true the parameter values will be used instead of the current values.\n   */\n\n\n  TargetState.prototype.withParams = function (params, replace) {\n    if (replace === void 0) {\n      replace = false;\n    }\n\n    var newParams = replace ? params : extend({}, this._params, params);\n    return new TargetState(this._stateRegistry, this._identifier, newParams, this._options);\n  };\n  /**\n   * Returns a copy of this TargetState, using the specified Transition Options.\n   *\n   * @param options the new options to use\n   * @param replace When false (default) the new options will be merged with the current options.\n   *                When true the options will be used instead of the current options.\n   */\n\n\n  TargetState.prototype.withOptions = function (options, replace) {\n    if (replace === void 0) {\n      replace = false;\n    }\n\n    var newOpts = replace ? options : extend({}, this._options, options);\n    return new TargetState(this._stateRegistry, this._identifier, this._params, newOpts);\n  };\n  /** Returns true if the object has a state property that might be a state or state name */\n\n\n  TargetState.isDef = function (obj) {\n    return obj && obj.state && (isString(obj.state) || isObject(obj.state) && isString(obj.state.name));\n  };\n\n  return TargetState;\n}();\n\nexport { TargetState };","map":{"version":3,"sources":["@uirouter/core/state/targetState.ts"],"names":[],"mappings":"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","sourcesContent":["/** @packageDocumentation @publicapi @module state */\n\nimport { StateDeclaration, StateOrName, TargetStateDef } from './interface';\nimport { TransitionOptions } from '../transition/interface';\nimport { StateObject } from './stateObject';\nimport { isObject, isString } from '../common/predicates';\nimport { stringify } from '../common/strings';\nimport { extend } from '../common';\nimport { StateRegistry } from './stateRegistry';\nimport { RawParams } from '../params';\n\n/**\n * Encapsulate the target (destination) state/params/options of a [[Transition]].\n *\n * This class is frequently used to redirect a transition to a new destination.\n *\n * See:\n *\n * - [[HookResult]]\n * - [[TransitionHookFn]]\n * - [[TransitionService.onStart]]\n *\n * To create a `TargetState`, use [[StateService.target]].\n *\n * ---\n *\n * This class wraps:\n *\n * 1) an identifier for a state\n * 2) a set of parameters\n * 3) and transition options\n * 4) the registered state object (the [[StateDeclaration]])\n *\n * Many UI-Router APIs such as [[StateService.go]] take a [[StateOrName]] argument which can\n * either be a *state object* (a [[StateDeclaration]] or [[StateObject]]) or a *state name* (a string).\n * The `TargetState` class normalizes those options.\n *\n * A `TargetState` may be valid (the state being targeted exists in the registry)\n * or invalid (the state being targeted is not registered).\n */\nexport class TargetState {\n  private _definition: StateObject;\n  private _params: RawParams;\n  private _options: TransitionOptions;\n\n  /** Returns true if the object has a state property that might be a state or state name */\n  static isDef = (obj): obj is TargetStateDef => {\n    return obj && obj.state && (isString(obj.state) || (isObject(obj.state) && isString(obj.state.name)));\n  };\n\n  /**\n   * The TargetState constructor\n   *\n   * Note: Do not construct a `TargetState` manually.\n   * To create a `TargetState`, use the [[StateService.target]] factory method.\n   *\n   * @param _stateRegistry The StateRegistry to use to look up the _definition\n   * @param _identifier An identifier for a state.\n   *    Either a fully-qualified state name, or the object used to define the state.\n   * @param _params Parameters for the target state\n   * @param _options Transition options.\n   *\n   * @internalapi\n   */\n  constructor(\n    private _stateRegistry: StateRegistry,\n    private _identifier: StateOrName,\n    _params?: RawParams,\n    _options?: TransitionOptions\n  ) {\n    this._identifier = _identifier;\n    this._params = extend({}, _params || {});\n    this._options = extend({}, _options || {});\n    this._definition = _stateRegistry.matcher.find(_identifier, this._options.relative);\n  }\n\n  /** The name of the state this object targets */\n  name(): string {\n    return (this._definition && this._definition.name) || <string>this._identifier;\n  }\n\n  /** The identifier used when creating this TargetState */\n  identifier(): StateOrName {\n    return this._identifier;\n  }\n\n  /** The target parameter values */\n  params(): RawParams {\n    return this._params;\n  }\n\n  /** The internal state object (if it was found) */\n  $state(): StateObject {\n    return this._definition;\n  }\n\n  /** The internal state declaration (if it was found) */\n  state(): StateDeclaration {\n    return this._definition && this._definition.self;\n  }\n\n  /** The target options */\n  options() {\n    return this._options;\n  }\n\n  /** True if the target state was found */\n  exists(): boolean {\n    return !!(this._definition && this._definition.self);\n  }\n\n  /** True if the object is valid */\n  valid(): boolean {\n    return !this.error();\n  }\n\n  /** If the object is invalid, returns the reason why */\n  error(): string {\n    const base = <any>this.options().relative;\n    if (!this._definition && !!base) {\n      const stateName = base.name ? base.name : base;\n      return `Could not resolve '${this.name()}' from state '${stateName}'`;\n    }\n    if (!this._definition) return `No such state '${this.name()}'`;\n    if (!this._definition.self) return `State '${this.name()}' has an invalid definition`;\n  }\n\n  toString() {\n    return `'${this.name()}'${stringify(this.params())}`;\n  }\n\n  /**\n   * Returns a copy of this TargetState which targets a different state.\n   * The new TargetState has the same parameter values and transition options.\n   *\n   * @param state The new state that should be targeted\n   */\n  withState(state: StateOrName): TargetState {\n    return new TargetState(this._stateRegistry, state, this._params, this._options);\n  }\n\n  /**\n   * Returns a copy of this TargetState, using the specified parameter values.\n   *\n   * @param params the new parameter values to use\n   * @param replace When false (default) the new parameter values will be merged with the current values.\n   *                When true the parameter values will be used instead of the current values.\n   */\n  withParams(params: RawParams, replace = false): TargetState {\n    const newParams: RawParams = replace ? params : extend({}, this._params, params);\n    return new TargetState(this._stateRegistry, this._identifier, newParams, this._options);\n  }\n\n  /**\n   * Returns a copy of this TargetState, using the specified Transition Options.\n   *\n   * @param options the new options to use\n   * @param replace When false (default) the new options will be merged with the current options.\n   *                When true the options will be used instead of the current options.\n   */\n  withOptions(options: TransitionOptions, replace = false): TargetState {\n    const newOpts = replace ? options : extend({}, this._options, options);\n    return new TargetState(this._stateRegistry, this._identifier, this._params, newOpts);\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}